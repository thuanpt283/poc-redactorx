RedactorX.add("plugin", "templates", {
    translations: {
      en: {
          "templates": {
              "title": "Email Templates",
          }
      },
  },
    defaults: {
      icon: '<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="m12.1666667 1c1.0193924 0 1.8333333.83777495 1.8333333 1.85714286v10.28571424c0 1.0193679-.8139409 1.8571429-1.8333333 1.8571429h-8.33333337c-1.01868744 0-1.83333333-.8379215-1.83333333-1.8571429v-10.28571424c0-1.01922137.81464589-1.85714286 1.83333333-1.85714286zm-.1666667 2h-8v10h8zm-2 7c.5522847 0 1 .4477153 1 1 0 .5128358-.3860402.9355072-.8833789.9932723l-.1166211.0067277h-4c-.55228475 0-1-.4477153-1-1 0-.5128358.38604019-.9355072.88337887-.9932723l.11662113-.0067277zm0-3c.5522847 0 1 .44771525 1 1 0 .51283584-.3860402.93550716-.8833789.99327227l-.1166211.00672773h-4c-.55228475 0-1-.44771525-1-1 0-.51283584.38604019-.93550716.88337887-.99327227l.11662113-.00672773zm0-3c.5522847 0 1 .44771525 1 1 0 .51283584-.3860402.93550716-.8833789.99327227l-.1166211.00672773h-4c-.55228475 0-1-.44771525-1-1 0-.51283584.38604019-.93550716.88337887-.99327227l.11662113-.00672773z"/></svg>',
      items: !1,
      custom: false,
    },
    start: function () {
        this.opts.templates.items &&
        this.app.toolbar.add("templates", {
          title: '## templates.title ##',
          icon: this.opts.templates.icon,
          command: "templates.popup",
          blocks: {
            all: "editable",
          },
        });
    },
    popup: function (t, i) {
      var p = {};
      for (var s in this.opts.templates.items)
        p[s] = {
          title: this.opts.templates.items[s].title,
          command: "templates.insert",
        };
      this.app.popup.create("templates", {
        items: p,
      }),
        this.app.popup.open({
          button: i,
        });
    },
    insert: function (t, i, p) {
        this.app.popup.close();
        var s = this.opts.templates.items[p].html;
        this.app.broadcast('templates.insert', {html: s});
        if(this.opts.templates.custom) return
        this.app.editor.insertContent({
            html: s,
        });
    },
    
  });